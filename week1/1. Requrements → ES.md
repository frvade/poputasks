### Таск-трекер должен быть отдельным дашбордом и доступен всем сотрудникам компании UberPopug Inc.
Actor: User  
Command: Log in to the task tracker  
Data: ???  
Event: User.LoggedInToTracker

### Авторизация в таск-трекере должна выполняться через общий сервис авторизации UberPopug Inc (у нас там инновационная система авторизации на основе формы клюва).
Actor: User  
Command: Authenticate/Authorize User  
Data: User credentials  
Event: User.Authenticated  

### Новые таски может создавать кто угодно (администратор, начальник, разработчик, менеджер и любая другая роль). У задачи должны быть описание, статус (выполнена или нет) и попуг, на которого заассайнена задача.
Actor: User    
Command: Create Task  
Data: Task  
Event: Task.Created

### Менеджеры или администраторы должны иметь кнопку «заассайнить задачи», которая возьмёт все открытые задачи и рандомно заассайнит каждую на любого из сотрудников (**Update:** кроме менеджера и администратора) . Не успел закрыть задачу до реассайна — сорян, делай следующую.
    1. Ассайнить задачу можно на кого угодно (**Update:** кроме менеджера и администратора), это может быть любой существующий аккаунт из системы.
    2. Ассайнить задачу можно только кнопкой «заассайнить задачи»
    3. При нажатии кнопки «заассайнить задачи» все текущие не закрытые задачи должны быть случайным образом перетасованы между каждым аккаунтом в системе
    4. Мы не заморачиваемся на ограничение по нажатию на кнопку «заассайнить задачи». Её можно нажимать хоть каждую секунду.
    5. На одного сотрудника может выпасть любое количество новых задач, может выпасть ноль, а может и 10.
Actor: User with role manager or admin
Command: Assign Tasks
Data: Task, User (role not (manager or admin))
Event: Task.Assigned

### Каждый сотрудник должен иметь возможность видеть в отдельном месте список заассайненных на него задач + отметить задачу выполненной.
Actor: User    
Command: Complete Task  
Data: Task  
Event: Task.Completed

### Аккаунтинг должен быть в отдельном дашборде. У обычных попугов доступ к аккаунтингу должен быть. Но только к информации о собственных счетах (аудит лог + текущий баланс).
Actor: User  
Command: Log in to the accounting  
Data: ???  
Event: User.LoggedInToAccounting

### Авторизация в дешборде аккаунтинга должна выполняться через общий сервис аутентификации UberPopug Inc.
Так же как с таск трекером

### У каждого из сотрудников должен быть свой счёт, который показывает, сколько за сегодня он получил денег. У счёта должен быть аудитлог того, за что были списаны или начислены деньги, с подробным описанием каждой из задач.
Actor: User    
Command: Get UserAccount details  
Data: Assigned and completed Tasks, UserAccount  
Event: ???

### Расценки:
    1. цены на задачу определяется единоразово, в момент появления в системе (можно с минимальной задержкой)
        - **Updated:** цены рассчитывается без привязки к сотруднику
    2. **Updated:** формула, которая говорит сколько списать денег с сотрудника при ассайне задачи — `rand(-10..-20)$`
    3. **Updated:** формула, которая говорит сколько начислить денег сотруднику для выполненой задачи — `rand(20..40)$`
    4. деньги списываются сразу после ассайна на сотрудника, а начисляются после выполнения задачи.
Actor: Task.Assigned  
Command: Calculate and assign task price  
Data: Task  
Event: Task.Priced

Actor: Task.Priced  
Command: Charge user  
Data: Task, UserAccount  
Event: UserAccount.Charged

Actor: Task.Completed  
Command: Pay to user  
Data: Task, UserAccount  
Event: UserAccount.Paid

### В конце дня необходимо:
    1. считать сколько денег сотрудник получил за рабочий день
    2. отправлять на почту сумму выплаты.
    3. отрицательный баланс переносится на следующий день. Единственный способ его погасить - закрыть достаточное количество задач в течении дня.
Actor: Cronjob  
Command: Payout  
Data: UserAccount  
Event: UserAccount.PaidOut

Actor: UserAccount.PaidOut  
Command: Send payout notification  
Data: User, UserAccount  
Event: UserAccount.PayoutNotified

### После выплаты баланса (в конце дня) он должен обнуляться, и в аудитлоге всех операций аккаунтинга должно быть отображено, что была выплачена сумма.
Actor: UserAccount.PaidOut  
Command: Zero account  
Data: UserAccount  
Event: UserAccount.Zeroed

### Аналитика — это отдельный дашборд, доступный только админам. (и видимо бухгалтерам?)
Actor: User (admin)  
Command: Log in to the analytics  
Data: ???  
Event: User.LoggedInToAnalytics

### Дешборд должен выводить количество заработанных топ-менеджментом за сегодня денег.  У админов и бухгалтеров должен быть доступ к общей статистике по деньгами заработанным (количество заработанных топ-менеджментом за сегодня денег + статистика по дням), и сколько попугов ушло в минус.
Actor: User (role admin or accountant)  
Command: Get Company total  
Data: Assigned and completed Tasks, Negative UserAccounts  
Event: ???

### Нужно показывать самую дорогую задачу за день, неделю или месяц
Actor: User    
Command: Get most expensive Task for the period (only for admin and accountant)  
Data: Completed Tasks  
Event: ???